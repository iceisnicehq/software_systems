<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link href="style.css" rel="stylesheet">
        <title>АРМ технической документаци</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="mobile.css" />
        <link rel="icon" type="image/png" href="/images/favicon.ico"/>
    </head>
    <script>
        let reportData = [];

        function saveToFile() {
            const report = [
                document.getElementById('input1').value,
                document.getElementById('input2').value,
                document.getElementById('input3').value,
                document.getElementById('input4').value,
                document.getElementById('input5').value
            ];

            // Append new report data to the array
            reportData.push(report);

            // Clear the form fields
            document.getElementById('reportForm').reset();

            // Create a downloadable CSV file
            downloadData();
        }

        function downloadData() {
            // Create CSV content
            let csvContent = "data:text/csv;charset=utf-8," // Header
                + reportData.map(e => e.join(",")).join("\r\n"); // Data rows
            const encodedUri = encodeURI(csvContent); // Encode the URI
            const link = document.createElement("a"); // Create an anchor element
            link.setAttribute("href", encodedUri); // Set the href to the encoded URI
            link.setAttribute("download", "data.txt"); // Set the file name
            document.body.appendChild(link); // Append the anchor to the body
            link.click(); // Programmatically click the anchor to trigger the download
            document.body.removeChild(link); // Remove the anchor from the document
        }
    </script>
    <body>
        <div id="header">
            <h1>Автоматизированное рабочее место отдела технической документации</h1>
            <div id="nav">
                <ul>
                    <li>
                        <a href="index.html" class="tooltip">Главная
                            <span class="tooltiptext">Перейти на главную страницу</span>
                        </a>
                    </li>
                    <li>
                        <a href="oblig.html" class="tooltip">Должностные обязанности
                            <span class="tooltiptext">Посмотреть должностные обязанности</span>
                        </a>
                    </li>
                    <li>
                        <a href="company.html" class="tooltip">О компании
                            <span class="tooltiptext">Узнать о компании</span>
                        </a>
                    </li>
                    <li>
                        <a href="structure.html" class="tooltip">Структура компании
                            <span class="tooltiptext">Посмотреть структуру компании</span>
                        </a>
                    </li>
                    <li>
                        <a href="contacts.html" class="tooltip">Контакты
                            <span class="tooltiptext">Свяжитесь с нами</span>
                        </a>
                    </li>
                </ul>
            </div>
            
        </div>
        <div class="wrapper">
            <div id="sidebar1" class="aside">
                <h2>Новостная лента</h2>
                <p><a href="https://gubkin.ru/events/detail.php?ID=52618">Кейс-чемпионат от кейс-клуба Губкинского университета и компании Axenix</a></p>
                </div>
            <div id="sidebar2" class="aside">
                <h2>Рабочие инструменты</h2>
                <ul>
                    <li>Правка недочетов</li>
                    <li>Прием документации</li>
                    <li>Организация хранения</li>
                    <li><a href="input.html">Ввод данных об отчёте</a></li>
                </ul>
            </div>
            <div id="article">
                <div id="main">
                    <h2>Ввод данных об отчете:</h2>
                    <form id="reportForm" onsubmit="saveToFile(); return false;">
                        <div class="form-group">
                            <label for="input1">Наименование:</label>
                            <input type="text" id="input1" required>
                        </div>
                        <div class="form-group">
                            <label for="input2">Номер отчета:</label>
                            <input type="text" id="input2" required>
                        </div>
                        <div class="form-group">
                            <label for="input3">Дата создания:</label>
                            <input type="text" id="input3" required>
                        </div>
                        <div class="form-group">
                            <label for="input4">ФИО создателя:</label>
                            <input type="text" id="input4" required>
                        </div>
                        <div class="form-group">
                            <label for="input5">Объект ТЭК:</label>
                            <input type="text" id="input5" required>
                        </div>  
                        <input type="submit" value="Сохранить данные">
                    </form>
                </div>
            </div>
    </div>
        </div>
        <div id="footer">
            <p>Contacts: oasu@gubkin.ru</p>
            <p>Copyright © gubkin.ru, 2024</p>
        </div>
    </body>
</html>
